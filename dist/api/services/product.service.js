"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _Product = _interopRequireDefault(require("../../models/Product"));
var _Review = _interopRequireDefault(require("../../models/Review"));
var _Seller = _interopRequireDefault(require("../../models/Seller"));
var _User = _interopRequireDefault(require("../../models/User"));
var _auth = _interopRequireDefault(require("./auth.service"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
class ProductServices {
  async createProduct(user_id, product) {
    const seller = await _Seller.default.findOne({
      user_id: user_id
    });
    let search_key = "";
    const length = product.specification ? product.specification.length : 0;
    for (let i = 0; i < length; i++) {
      search_key += product.specification[i].name + " " + product.specification[i].value + " ";
    }
    search_key += product.title;
    const newProduct = await _Product.default.create({
      title: product.title,
      price: product.price,
      specification: product.specification,
      various_size: product.various_size,
      requiredAttachments: product.requiredAttachments ? product.requiredAttachments : null,
      images: product.images,
      user_id: user_id,
      shop_name: seller.shop_name,
      search_key: search_key
    });
    seller.products ? seller.products.push(newProduct._id) : seller.products = [newProduct._id];
    await seller.save();
    return newProduct;
  }
  async addReview(uid, body) {
    const user = await _User.default.findById(uid);
    const review = await _Review.default.create({
      name: user.name,
      product_id: body.product_id,
      star: body.star,
      description: body.description,
      timestamp: new Date().getTime()
    });
    const product = await _Product.default.findById(body.product_id);
    const count = product !== null && product !== void 0 && product.count ? product.count : 0;
    const star = product !== null && product !== void 0 && product.star ? product.star : 0;
    const newStar = (star * count + body.star) / (count + 1);
    await _Product.default.findByIdAndUpdate(body.product_id, {
      star: newStar.toFixed(2),
      count: count + 1
    });
    return review._id;
  }
  async getProductById(id) {
    const product = await _Product.default.findById(id);
    const reviewsOfProduct = await _Review.default.find({
      product_id: id
    });
    try {
      return {
        ...product["_doc"],
        reviews: [...reviewsOfProduct]
      };
    } catch (err) {
      return {
        message: "Product not found"
      };
    }
  }
  async getTopPicks(limit) {
    const products = await _Product.default.find({
      star: {
        $gt: 0
      }
    }).sort({
      star: -1
    }).limit(parseInt(limit));
    return products;
  }
  async getProductSellerid(uid) {
    const seller = await _Seller.default.findOne({
      user_id: uid
    });
    const products = [];
    if (seller) {
      for (let i = 0; i < seller.products.length; i++) {
        const product = await _Product.default.findById(seller.products[i]);
        if (product) products.push(product);
      }
      return products;
    }
    return {
      message: "No user found"
    };
  }
  async searchProduct(keyword) {
    if (keyword.length < 2) return [];
    const keys = keyword.split(" ");
    let top = 0;
    let picks = 0;
    for (let i = 0; i < keys.length; i++) {
      if (keys[i] === "top") top = 1;else if (keys[i] === "pick" || keys[i] === "picks") picks = 1;else if (keys[i] === "toppicks" || keys[i] === "top-picks" || keys[i] === "top-pick") {
        top = 1, picks = 1;
      }
    }
    if (top && picks) {
      return this.getTopPicks(10);
    } else if (top) {
      const products = await _Product.default.aggregate([{
        $search: {
          index: "Search index",
          autocomplete: {
            query: keyword,
            path: "search_key"
          }
        }
      }]).sort({
        star: -1
      }).limit(10);
      return products;
    } else {
      const products = await _Product.default.aggregate([{
        $search: {
          index: "Search index",
          autocomplete: {
            query: keyword,
            path: "search_key"
          }
        }
      }]);
      return products;
    }
  }
}
var _default = new ProductServices();
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9kdWN0U2VydmljZXMiLCJjcmVhdGVQcm9kdWN0IiwidXNlcl9pZCIsInByb2R1Y3QiLCJzZWxsZXIiLCJTZWxsZXIiLCJmaW5kT25lIiwic2VhcmNoX2tleSIsImxlbmd0aCIsInNwZWNpZmljYXRpb24iLCJpIiwibmFtZSIsInZhbHVlIiwidGl0bGUiLCJuZXdQcm9kdWN0IiwiUHJvZHVjdCIsImNyZWF0ZSIsInByaWNlIiwidmFyaW91c19zaXplIiwicmVxdWlyZWRBdHRhY2htZW50cyIsImltYWdlcyIsInNob3BfbmFtZSIsInByb2R1Y3RzIiwicHVzaCIsIl9pZCIsInNhdmUiLCJhZGRSZXZpZXciLCJ1aWQiLCJib2R5IiwidXNlciIsIlVzZXIiLCJmaW5kQnlJZCIsInJldmlldyIsIlJldmlldyIsInByb2R1Y3RfaWQiLCJzdGFyIiwiZGVzY3JpcHRpb24iLCJ0aW1lc3RhbXAiLCJEYXRlIiwiZ2V0VGltZSIsImNvdW50IiwibmV3U3RhciIsImZpbmRCeUlkQW5kVXBkYXRlIiwidG9GaXhlZCIsImdldFByb2R1Y3RCeUlkIiwiaWQiLCJyZXZpZXdzT2ZQcm9kdWN0IiwiZmluZCIsInJldmlld3MiLCJlcnIiLCJtZXNzYWdlIiwiZ2V0VG9wUGlja3MiLCJsaW1pdCIsIiRndCIsInNvcnQiLCJwYXJzZUludCIsImdldFByb2R1Y3RTZWxsZXJpZCIsInNlYXJjaFByb2R1Y3QiLCJrZXl3b3JkIiwia2V5cyIsInNwbGl0IiwidG9wIiwicGlja3MiLCJhZ2dyZWdhdGUiLCIkc2VhcmNoIiwiaW5kZXgiLCJhdXRvY29tcGxldGUiLCJxdWVyeSIsInBhdGgiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zZXJ2ZXIvYXBpL3NlcnZpY2VzL3Byb2R1Y3Quc2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvZHVjdCBmcm9tIFwiLi4vLi4vbW9kZWxzL1Byb2R1Y3RcIjtcbmltcG9ydCBSZXZpZXcgZnJvbSBcIi4uLy4uL21vZGVscy9SZXZpZXdcIjtcbmltcG9ydCBTZWxsZXIgZnJvbSBcIi4uLy4uL21vZGVscy9TZWxsZXJcIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi8uLi9tb2RlbHMvVXNlclwiO1xuaW1wb3J0IGF1dGhTZXJ2aWNlIGZyb20gXCIuL2F1dGguc2VydmljZVwiO1xuY2xhc3MgUHJvZHVjdFNlcnZpY2VzIHtcbiAgYXN5bmMgY3JlYXRlUHJvZHVjdCh1c2VyX2lkLCBwcm9kdWN0KSB7XG4gICAgY29uc3Qgc2VsbGVyID0gYXdhaXQgU2VsbGVyLmZpbmRPbmUoeyB1c2VyX2lkOiB1c2VyX2lkIH0pO1xuICAgIGxldCBzZWFyY2hfa2V5ID0gXCJcIjtcbiAgICBjb25zdCBsZW5ndGggPSBwcm9kdWN0LnNwZWNpZmljYXRpb24gPyBwcm9kdWN0LnNwZWNpZmljYXRpb24ubGVuZ3RoIDogMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzZWFyY2hfa2V5ICs9XG4gICAgICAgIHByb2R1Y3Quc3BlY2lmaWNhdGlvbltpXS5uYW1lICtcbiAgICAgICAgXCIgXCIgK1xuICAgICAgICBwcm9kdWN0LnNwZWNpZmljYXRpb25baV0udmFsdWUgK1xuICAgICAgICBcIiBcIjtcbiAgICB9XG4gICAgc2VhcmNoX2tleSArPSBwcm9kdWN0LnRpdGxlO1xuXG4gICAgY29uc3QgbmV3UHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuY3JlYXRlKHtcbiAgICAgIHRpdGxlOiBwcm9kdWN0LnRpdGxlLFxuICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXG4gICAgICBzcGVjaWZpY2F0aW9uOiBwcm9kdWN0LnNwZWNpZmljYXRpb24sXG4gICAgICB2YXJpb3VzX3NpemU6IHByb2R1Y3QudmFyaW91c19zaXplLFxuICAgICAgcmVxdWlyZWRBdHRhY2htZW50czogcHJvZHVjdC5yZXF1aXJlZEF0dGFjaG1lbnRzXG4gICAgICAgID8gcHJvZHVjdC5yZXF1aXJlZEF0dGFjaG1lbnRzXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGltYWdlczogcHJvZHVjdC5pbWFnZXMsXG4gICAgICB1c2VyX2lkOiB1c2VyX2lkLFxuICAgICAgc2hvcF9uYW1lOiBzZWxsZXIuc2hvcF9uYW1lLFxuICAgICAgc2VhcmNoX2tleTogc2VhcmNoX2tleSxcbiAgICB9KTtcblxuICAgIHNlbGxlci5wcm9kdWN0c1xuICAgICAgPyBzZWxsZXIucHJvZHVjdHMucHVzaChuZXdQcm9kdWN0Ll9pZClcbiAgICAgIDogKHNlbGxlci5wcm9kdWN0cyA9IFtuZXdQcm9kdWN0Ll9pZF0pO1xuXG4gICAgYXdhaXQgc2VsbGVyLnNhdmUoKTtcbiAgICByZXR1cm4gbmV3UHJvZHVjdDtcbiAgfVxuICBhc3luYyBhZGRSZXZpZXcodWlkLCBib2R5KSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodWlkKTtcbiAgICBjb25zdCByZXZpZXcgPSBhd2FpdCBSZXZpZXcuY3JlYXRlKHtcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgIHByb2R1Y3RfaWQ6IGJvZHkucHJvZHVjdF9pZCxcbiAgICAgIHN0YXI6IGJvZHkuc3RhcixcbiAgICAgIGRlc2NyaXB0aW9uOiBib2R5LmRlc2NyaXB0aW9uLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICB9KTtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChib2R5LnByb2R1Y3RfaWQpO1xuICAgIGNvbnN0IGNvdW50ID0gcHJvZHVjdD8uY291bnQgPyBwcm9kdWN0LmNvdW50IDogMDtcbiAgICBjb25zdCBzdGFyID0gcHJvZHVjdD8uc3RhciA/IHByb2R1Y3Quc3RhciA6IDA7XG4gICAgY29uc3QgbmV3U3RhciA9IChzdGFyICogY291bnQgKyBib2R5LnN0YXIpIC8gKGNvdW50ICsgMSk7XG5cbiAgICBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kVXBkYXRlKGJvZHkucHJvZHVjdF9pZCwge1xuICAgICAgc3RhcjogbmV3U3Rhci50b0ZpeGVkKDIpLFxuICAgICAgY291bnQ6IGNvdW50ICsgMSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmV2aWV3Ll9pZDtcbiAgfVxuICBhc3luYyBnZXRQcm9kdWN0QnlJZChpZCkge1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKGlkKTtcbiAgICBjb25zdCByZXZpZXdzT2ZQcm9kdWN0ID0gYXdhaXQgUmV2aWV3LmZpbmQoeyBwcm9kdWN0X2lkOiBpZCB9KTtcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyAuLi5wcm9kdWN0W1wiX2RvY1wiXSwgcmV2aWV3czogWy4uLnJldmlld3NPZlByb2R1Y3RdIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIlByb2R1Y3Qgbm90IGZvdW5kXCIgfTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0VG9wUGlja3MobGltaXQpIHtcbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuZmluZCh7XG4gICAgICBzdGFyOiB7ICRndDogMCB9LFxuICAgIH0pXG4gICAgICAuc29ydCh7IHN0YXI6IC0xIH0pXG4gICAgICAubGltaXQocGFyc2VJbnQobGltaXQpKTtcbiAgICByZXR1cm4gcHJvZHVjdHM7XG4gIH1cbiAgYXN5bmMgZ2V0UHJvZHVjdFNlbGxlcmlkKHVpZCkge1xuICAgIGNvbnN0IHNlbGxlciA9IGF3YWl0IFNlbGxlci5maW5kT25lKHsgdXNlcl9pZDogdWlkIH0pO1xuICAgIGNvbnN0IHByb2R1Y3RzID0gW107XG4gICAgaWYgKHNlbGxlcikge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxsZXIucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQoc2VsbGVyLnByb2R1Y3RzW2ldKTtcbiAgICAgICAgaWYgKHByb2R1Y3QpIHByb2R1Y3RzLnB1c2gocHJvZHVjdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvZHVjdHM7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiTm8gdXNlciBmb3VuZFwiIH07XG4gIH1cbiAgYXN5bmMgc2VhcmNoUHJvZHVjdChrZXl3b3JkKSB7XG4gICAgaWYgKGtleXdvcmQubGVuZ3RoIDwgMikgcmV0dXJuIFtdO1xuICAgIGNvbnN0IGtleXMgPSBrZXl3b3JkLnNwbGl0KFwiIFwiKTtcbiAgICBsZXQgdG9wID0gMDtcbiAgICBsZXQgcGlja3MgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGtleXNbaV0gPT09IFwidG9wXCIpIHRvcCA9IDE7XG4gICAgICBlbHNlIGlmIChrZXlzW2ldID09PSBcInBpY2tcIiB8fCBrZXlzW2ldID09PSBcInBpY2tzXCIpIHBpY2tzID0gMTtcbiAgICAgIGVsc2UgaWYgKFxuICAgICAgICBrZXlzW2ldID09PSBcInRvcHBpY2tzXCIgfHxcbiAgICAgICAga2V5c1tpXSA9PT0gXCJ0b3AtcGlja3NcIiB8fFxuICAgICAgICBrZXlzW2ldID09PSBcInRvcC1waWNrXCJcbiAgICAgICkge1xuICAgICAgICAodG9wID0gMSksIChwaWNrcyA9IDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodG9wICYmIHBpY2tzKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRUb3BQaWNrcygxMCk7XG4gICAgfSBlbHNlIGlmICh0b3ApIHtcbiAgICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvZHVjdC5hZ2dyZWdhdGUoW1xuICAgICAgICB7XG4gICAgICAgICAgJHNlYXJjaDoge1xuICAgICAgICAgICAgaW5kZXg6IFwiU2VhcmNoIGluZGV4XCIsXG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IHtcbiAgICAgICAgICAgICAgcXVlcnk6IGtleXdvcmQsXG4gICAgICAgICAgICAgIHBhdGg6IFwic2VhcmNoX2tleVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSlcbiAgICAgICAgLnNvcnQoeyBzdGFyOiAtMSB9KVxuICAgICAgICAubGltaXQoMTApO1xuICAgICAgcmV0dXJuIHByb2R1Y3RzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuYWdncmVnYXRlKFtcbiAgICAgICAge1xuICAgICAgICAgICRzZWFyY2g6IHtcbiAgICAgICAgICAgIGluZGV4OiBcIlNlYXJjaCBpbmRleFwiLFxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiB7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBrZXl3b3JkLFxuICAgICAgICAgICAgICBwYXRoOiBcInNlYXJjaF9rZXlcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgICAgcmV0dXJuIHByb2R1Y3RzO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHJvZHVjdFNlcnZpY2VzKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBeUM7QUFDekMsTUFBTUEsZUFBZSxDQUFDO0VBQ3BCLE1BQU1DLGFBQWEsQ0FBQ0MsT0FBTyxFQUFFQyxPQUFPLEVBQUU7SUFDcEMsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLGVBQU0sQ0FBQ0MsT0FBTyxDQUFDO01BQUVKLE9BQU8sRUFBRUE7SUFBUSxDQUFDLENBQUM7SUFDekQsSUFBSUssVUFBVSxHQUFHLEVBQUU7SUFDbkIsTUFBTUMsTUFBTSxHQUFHTCxPQUFPLENBQUNNLGFBQWEsR0FBR04sT0FBTyxDQUFDTSxhQUFhLENBQUNELE1BQU0sR0FBRyxDQUFDO0lBQ3ZFLEtBQUssSUFBSUUsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRixNQUFNLEVBQUVFLENBQUMsRUFBRSxFQUFFO01BQy9CSCxVQUFVLElBQ1JKLE9BQU8sQ0FBQ00sYUFBYSxD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